<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Productos - Kompra Libre</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="style.css" rel="stylesheet" />
</head>
<body>

  <header class="bg-primary p-3">
    <div class="container d-flex justify-content-between align-items-center">
      <h1 class="h3 m-0" style="color: var(--color-negro-claro);">Kompra Libre</h1>
      <nav>
        <a href="index.html" class="me-3 text-white">Inicio</a>
        <a href="categorias.html" class="me-3 text-white">Categorías</a>
        <a href="usuario.html" class="me-3 text-white">Usuario</a>
        <a href="admin.html" class="text-white">Admin</a>
      </nav>
    </div>
  </header>

  <main class="container py-5">
    <h2 class="text-center mb-4">Productos</h2>
    <div id="productos-container" class="d-flex flex-wrap gap-4 justify-content-center"></div>
  </main>

  <footer class="bg-dark text-white text-center py-3">
    <p>© 2025 Kompra Libre. Todos los derechos reservados.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    let productos = JSON.parse(localStorage.getItem("productos")) || [];

    if (productos.length === 0) {
      productos = [
        {
          id: 1,
          nombre: "Cortadora de Césped",
          precio: 15000,
          imagen: "img/Cortadora de Cesped.jpg",
          categoria: "herramientas"
        },
        {
          id: 2,
          nombre: "Taladro Eléctrico",
          precio: 1500,
          imagen: "img/Taladro.jpg",
          categoria: "herramientas"
        },
        {
          id: 3,
          nombre: "Destornillador",
          precio: 800,
          imagen: "img/Destornillador.jpg",
          categoria: "herramientas"
        }
      ];
      localStorage.setItem("productos", JSON.stringify(productos));
    }

    const params = new URLSearchParams(window.location.search);
    let categoria = params.get("categoria") || "";
    categoria = categoria.trim().toLowerCase();

    const productosFiltrados = productos.filter(p => p.categoria.toLowerCase() === categoria);

    const contenedor = document.getElementById("productos-container");
    contenedor.innerHTML = ""; 

    if (productosFiltrados.length === 0) {
      contenedor.innerHTML = `<p>No hay productos para esta categoría.</p>`;
    } else {
      productosFiltrados.forEach(p => {
        const card = document.createElement("div");
        card.className = "card shadow-sm";
        card.style.width = "18rem";
        card.innerHTML = `
          <img src="${p.imagen}" class="card-img-top" alt="${p.nombre}">
          <div class="card-body">
            <h5 class="card-title">${p.nombre}</h5>
            <p class="card-text">Precio: $${p.precio}</p>
          </div>
        `;
        contenedor.appendChild(card);
      });
    }
  </script>
</body>
</html>
